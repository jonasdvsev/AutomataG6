<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/static/styles/styleoutput.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/stylebackground.css">
    <title>Automata</title>
  </head>
  <body>

<div class="container-fluid maincont">



<!--             ETO YUNG PARA SA BACKGROUND               -->
<div class="bubbles">

      <span style="--i:11;"></span>
      <span style="--i:12;"></span>
      <span style="--i:24;"></span>
      <span style="--i:10;"></span>
      <span style="--i:14;"></span>
      <span style="--i:23;"></span>
      <span style="--i:18;"></span>
      <span style="--i:16;"></span>
      <span style="--i:19;"></span>
      <span style="--i:20;"></span>
      <span style="--i:22;"></span>
      <span style="--i:25;"></span>
      <span style="--i:18;"></span>
      <span style="--i:21;"></span>
      <span style="--i:15;"></span>
      <span style="--i:13;"></span>
      <span style="--i:26;"></span>
      <span style="--i:17;"></span>
      <span style="--i:13;"></span>
      <span style="--i:28;"></span>


      <span style="--i:11;"></span>
      <span style="--i:12;"></span>
      <span style="--i:24;"></span>
      <span style="--i:10;"></span>
      <span style="--i:14;"></span>
      <span style="--i:23;"></span>
      <span style="--i:18;"></span>
      <span style="--i:16;"></span>
      <span style="--i:19;"></span>
      <span style="--i:20;"></span>
      <span style="--i:22;"></span>
      <span style="--i:25;"></span>
      <span style="--i:18;"></span>
      <span style="--i:21;"></span>
      <span style="--i:15;"></span>
      <span style="--i:13;"></span>
      <span style="--i:26;"></span>
      <span style="--i:17;"></span>
      <span style="--i:13;"></span>
      <span style="--i:28;"></span>


      <span style="--i:11;"></span>
      <span style="--i:12;"></span>
      <span style="--i:24;"></span>
      <span style="--i:10;"></span>
      <span style="--i:14;"></span>
      <span style="--i:23;"></span>
      <span style="--i:18;"></span>
      <span style="--i:16;"></span>
      <span style="--i:19;"></span>
      <span style="--i:20;"></span>
      <span style="--i:22;"></span>
      <span style="--i:25;"></span>
      <span style="--i:18;"></span>
      <span style="--i:21;"></span>
      <span style="--i:15;"></span>
      <span style="--i:13;"></span>
      <span style="--i:26;"></span>
      <span style="--i:17;"></span>
      <span style="--i:13;"></span>
      <span style="--i:28;"></span>

      <span style="--i:11;"></span>
      <span style="--i:12;"></span>
      <span style="--i:24;"></span>
      <span style="--i:10;"></span>
      <span style="--i:14;"></span>
      <span style="--i:23;"></span>
      <span style="--i:18;"></span>
      <span style="--i:16;"></span>
      <span style="--i:19;"></span>
      <span style="--i:20;"></span>
      <span style="--i:22;"></span>
      <span style="--i:25;"></span>
      <span style="--i:18;"></span>





      </div>










<h1 id="automatagrp6" style="color:white;"><a href="#automatacontent">A U T O M A T A     &nbsp&nbsp&nbsp&nbsp   G R O U P 6</a></h1>
  <div id=automatacontent class="automatacontent">
       <form action="{{ url_for('regexoutput',regexinputinfo=regexinputinfo) }}" method="POST">
    <button type="submit" id="backbutton" class="btn" ><img src="/static/images/buttons/back.png" height ="100" width="250" /></button>
       </form>


      <button type="button" id="backward" class="btn"><img src="/static/images/buttons/backward.jpg" height ="100" width="250" /></button>
        <button type="button" id="readnext" class="btn"><img src="/static/images/buttons/forward.jpg" height ="100" width="250" /></button>
      <h1 id="reject"> REJECT </h1>
         <h1 id="accept"> ACCEPT</h1>
    <div class="startpage"> <!-- main menu page-->






<div class="outputpage"> <!-- this is where all the inputs are displayed-->
        {% if regexinputinfo == "regex1" %}
    <h1 class="regexinputs">  1. ( aba + bab) ( a + b )* ( bab ) ( a + b )* ( a + b + ab + ba ) ( a + b + aa )* </h1>
      <img  src="/static/images/DFA1.png" id="output" alt="dfa" width="1400" height="900">
        {% else %}
     <h1 class="regexinputs"> 2. ( ( 101 + 111 + 101 ) + ( 1 + 0 + 11 ) )
         ( 1 + 0 + 01 )* ( 111 + 000 + 101 ) ( 1 + 0 )* </h1>
     <img  src="/static/images/DFA2.png" id="output" alt="dfa" width="1400" height="900">
        {% endif %}

</div>




</div>
</div>



  </body>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script src="/static/index.js" charset="utf-8"></script>
        <script type="text/javascript">

             var position=0;
            var regexinputinfos = {{ regexinputinfo | tojson}}
             var states = Array.from({{ Statess | tojson }});
            var tracednaba = {{ Traced | tojson }}

            $(document).ready(function() {
                if (regexinputinfos === "regex1"){
                      if (states.at(-1) === "s9") {
                          console.log("accept");
                      } else if (states.at(-1) !== "s9"){
                          console.log("reject");

                            console.log(states);
                            console.log(states.at(-1));



                      }
                }else  if (regexinputinfos === "regex2") {
                    if (states.at(-1) === "s7") {
                        console.log("accept");
                    } else if (states.at(-1) !== "s7") {
                        console.log("reject");


                    }
        }

});


             console.log(states)
             for (i in states){
                 console.log(states[i])
             }


            $("#readnext").click(function(){


                readnext();

                });

             $("#backward").click(function(){


                backwards();

                });






             function traceOutput(directory){
                    if (regexinputinfos == "regex1") {
                        $(".outputpage #output").attr("src", "/static/images/states/regex1/" + directory + ".png")
                    }
                    else{
                        $(".outputpage #output").attr("src", "/static/images/states/regex2/" + directory + ".png")
                    }
            }

            function readnext(){ //abababa
                if (regexinputinfos == "regex1") {

                    if (position === states.length && states.at(-1) !== "s9") {

                        alert("string invalid");
                            $("#reject").toggle();

                          position = 0;
                        traceOutput(states[position]);

                    } else if (position === states.length && states.at(-1) === "s9") {

                        alert("string accepted");
                          $("#accept").toggle();
                         position=(states.length)-1;
                        traceOutput(states[position]);

                    } else {
                        traceOutput(states[position]);
                        console.log(states[position]);
                        position++;

                    }
                } else if  (regexinputinfos == "regex2") {

                    if (position === states.length && states.at(-1) !== "s7") {
                        position = 0;
                        alert("string invalid");
                                $("#reject").toggle();
                        traceOutput(states[position]);

                    } else if (position === states.length && states.at(-1) === "s7") {

                        alert("string accepted");
                             $("#accept").toggle();
                            position=(states.length)-1;
                        traceOutput(states[position]);



                    } else {
                        traceOutput(states[position]);
                        console.log(states[position]);
                        position++;

                    }
                }




            }
                    function backwards(){ //abababa


                if (position===0){
                    position=0;
                     traceOutput(states[position]);
            console.log(states[position]);
                }else {
                     traceOutput(states[position]);
            console.log(states[position]);
                    position--;
                }


}



        </script>


</html>
